!function(t,e){"function"==typeof define&&define.amd?define([],e()):"object"==typeof module&&module.exports?module.exports=e():t.zenscroll=e()}(this,function(){"use strict";var t=window,e=document,n=function(n,o,i){o=o||999,i&&0===i||(i=9);var r,c=e.documentElement,u=function(){return n?n.scrollTop:t.scrollY||c.scrollTop},f=function(){return n?Math.min(n.offsetHeight,t.innerHeight):t.innerHeight||c.clientHeight},a=function(t){return n?t.offsetTop-n.offsetTop:t.getBoundingClientRect().top+u()-c.offsetTop},l=function(){clearTimeout(r),r=0},s=function(e,i){l();var a=u(),s=Math.max(e,0)-a;i=i||Math.min(Math.abs(s),o);var h=(new Date).getTime();!function m(){r=setTimeout(function(){var e=Math.min(((new Date).getTime()-h)/i,1),o=Math.max(Math.floor(a+s*(.5>e?2*e*e:e*(4-2*e)-1)),0);n?n.scrollTop=o:t.scrollTo(0,o),1>e&&f()+o<(n||c).scrollHeight?m():setTimeout(l,99)},9)}()},h=function(t,e){s(a(t)-i,e)},m=function(t,e){var n=t.getBoundingClientRect().height+2*i,o=f(),r=a(t),c=r+n,l=u();i>r-l||n>o?h(t,e):i>l+o-c&&s(c-o,e)},g=function(t,e,n){s(Math.max(a(t)-f()/2+(n||t.getBoundingClientRect().height/2),0),e)},d=function(t,e){t&&(o=t),null!==e&&(i=e)};return{setup:d,to:h,toY:s,intoView:m,center:g,stop:l,moving:function(){return!!r}}},o=n();if("addEventListener"in t&&!t.noZensmooth){var i=function(e){event.preventDefault();try{history.replaceState({},"",t.location.href.split("#")[0]+e)}catch(n){}};t.addEventListener("click",function(t){for(var e=t.target;e&&"A"!==e.tagName;)e=e.parentNode;if(e){var n=e.getAttribute("href")||"";if(0===n.indexOf("#"))if("#"===n)o.toY(0),i("");else{var r=e.hash.substring(1),c=document.getElementById(r);c&&(o.to(c),i("#"+r))}}},!1)}return{createScroller:n,setup:o.setup,to:o.to,toY:o.toY,intoView:o.intoView,center:o.center,stop:o.stop,moving:o.moving}});